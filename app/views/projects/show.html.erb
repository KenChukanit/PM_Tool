<div class="card mt-4">
<div class="card-body">
<h3>  <%= @project.title %></h3>
<h5>  <%= @project.description %></h3>
<h6>  <%= @project.due_date %></h3>
<div>
    Created by: <%= @project.user&.full_name || "DELETED" %>
</div>
<small>
<p>Created on : <%= time_ago_in_words(@project.created_at)  %> </p>
</small>
<small>
<p>Updated on : <%= time_ago_in_words(@project.updated_at)  %> </p>
</small>
<small>
    <%= link_to("Edit", edit_project_path(@project.id))%> | 
    <%= link_to("Delete",project_path(@project),method: :delete,data:{confirm: "Are you sure you want to delete this project"})%>
</small>
</div>
</div>

<h4> Uncompleted Tasks</h4>
<% @project.tasks.each do |task| %>
<%  if task.uncompleted? %>
<div class="card">
    <h5 class = "card-title"> <%= task.title  %></h5>
    <p class = "card-body">  <%= task.body   %></p>
    <p>  <%= task.due_date   %></p>
</div>

<div>
 <span>
    <%= form_with model: [@project, task], method: :patch, local: true do |f|  %>
    <%= f.submit "Mark as Done"%>
 </span>
 <span>
    <%= link_to "Delete",project_task_path(@project,task), method: :delete,data: {confirm: "Are you sure to delete this task?"} %>
 </span>
</div>

<%end%>
<%end%>
<% end %>
<h4> Completed Tasks</h4>
<% @project.tasks.each do |task| %>
<%  if task.completed?%>

<div class="card">
    <h5 class = "card-title"><%= task.title  %></h5>
    <p class = "card-body">  <%= task.body   %></p>
    <p> <%= task.due_date   %></p>
</div>
<div>
    <span>
    <%= form_with model: [@project, task], method: :patch, local: true do |f|  %>
    <%= f.submit "Mark as Undone"%>
    </span>
    <span>
    <%= link_to "Delete",project_task_path(@project,task), method: :delete,data: {confirm: "Are you sure to delete this task?"} %>
    </span>
</div>


<%end%>
<%end%>
<%end%>






<div class="form-group"> 
<%= form_with model: [@project, @task], local: true do |f|%>
<ul>
<% if @task.errors.full_messages.each do |msg|%>

    <li>
        <%= msg %>
       
    </li>
<% end %>
<% end %>
    <div> 
    <%=  f.label :title %>
    <%=  f.text_field :title, class: 'form-control' %>
    </div>
    <div>
     <%=  f.label :body %>
    <%=  f.text_area :body, class: 'form-control' %>
    </div>
     <div>
     <%=  f.label :due_date %>
    <%=  f.date_field :due_date, class: 'form-control' %>
    </div>
    <%=  f.submit  class: 'btn btn-primary'%>

</div>
<% end %>



<%= link_to "New Dicussion", new_project_discussion_path(@project, @discussion)%>

<% @project.discussions.each do |discussion| %>
<h3>  <%= discussion.title %></h3>
<h3>  <%= discussion.description %></h3>
<%= link_to("Edit", edit_project_discussion_path(@project,discussion))%> | 
<%= link_to "Delete",project_discussion_path(@project,discussion), method: :delete,data: {confirm: "Are you sure to delete this discussion?"} %>
<%= link_to "Add comment", new_project_discussion_comment_path(@project, discussion, @comment)%>
<small>
    Discussed by:
    <%= discussion.user&.full_name || "DELETED" %>
</small>
<div>
<% discussion.comments.each do |comment| %>
<p>  <%= comment.body %></p>
<small>
    Commented by:
    <%= comment.user&.full_name || "DELETED" %>
</small>
<%= link_to("Edit", edit_project_discussion_comment_path(@project,discussion,comment))%> | 
<%= link_to "Delete",project_discussion_comment_path(@project,discussion,comment), method: :delete,data: {confirm: "Are you sure to delete this comment?"} %>
<% end %>
<div>
<% end %>